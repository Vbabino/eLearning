import{k as v,a as h,j as e,A as N,m as S,I as y,n as b,U as I,l as E}from"./index-BraKEzPG.js";import{C as o}from"./index.esm-CyJlCjTa.js";import{b as P,c as C,d as t,a as j}from"./CRow-D-mEvV_I.js";import{C as R}from"./CCardGroup-Sqb-8jXq.js";import{C as _,a as L}from"./CCardBody-g5mY4aaI.js";import{C as D}from"./CForm-BLsk1Ow9.js";import{C as l,a as n}from"./CInputGroupText-Dcp3u1-q.js";import{c as u}from"./cil-lock-locked-DmxpJbVL.js";import{C as i}from"./CFormInput-DI9PoxJV.js";import{c as F}from"./cil-user-Ddrdy7PS.js";import"./CFormControlWrapper-BEyPui5m.js";const Y=()=>{const g=v(),[s,f]=h.useState({otp:"",email:"",new_password:""}),[c,m]=h.useState(!1),r=a=>{f({...s,[a.target.name]:a.target.value})},w=async a=>{var d,p;a.preventDefault(),m(!0);try{localStorage.removeItem(N),localStorage.removeItem(S),localStorage.removeItem(y),localStorage.removeItem(b),localStorage.removeItem(I);const x=await E.post("/api/auth/verify-otp-reset-password/",s);alert("Password reset successful"),g("/login")}catch(x){alert(((p=(d=x.response)==null?void 0:d.data)==null?void 0:p.detail)||"Password reset failed")}finally{m(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(P,{children:e.jsx(C,{className:"justify-content-center",children:e.jsx(t,{md:8,children:e.jsx(R,{children:e.jsx(_,{className:"p-4",children:e.jsx(L,{children:e.jsxs(D,{onSubmit:w,children:[e.jsx("h1",{children:"Reset Password"}),e.jsx("p",{className:"text-body-secondary",children:"Enter below requirements"}),e.jsxs(l,{className:"mb-4",children:[e.jsx(n,{children:e.jsx(o,{icon:u})}),e.jsx(i,{placeholder:"OTP",name:"otp",value:s.otp,onChange:r})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(o,{icon:F})}),e.jsx(i,{placeholder:"email",autoComplete:"email",name:"email",value:s.email,onChange:r})]}),e.jsxs(l,{className:"mb-4",children:[e.jsx(n,{children:e.jsx(o,{icon:u})}),e.jsx(i,{type:"password",placeholder:"New password",autoComplete:"new-password",name:"new_password",value:s.new_password,onChange:r})]}),e.jsxs(C,{children:[e.jsx(t,{xs:6,children:e.jsx(j,{color:"primary",className:"px-4",type:"submit",disabled:c,children:c?"Logging in...":"Login"})}),e.jsx(t,{xs:6,className:"text-right",children:e.jsx(j,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})})})})})})})})};export{Y as default};
