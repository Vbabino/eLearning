import{a as f,_ as K,R as t,b as j,c as m,P as n,A as H,m as Y,I as q,n as J,U as M,k as Q,j as e,l as W}from"./index-BraKEzPG.js";import{C as g}from"./index.esm-CyJlCjTa.js";import{b as X,c as Z,d as $,a as T}from"./CRow-D-mEvV_I.js";import{C as ee,a as ae}from"./CCardBody-g5mY4aaI.js";import{C as te}from"./CForm-BLsk1Ow9.js";import{C as d,a as u}from"./CInputGroupText-Dcp3u1-q.js";import{c as V}from"./cil-user-Ddrdy7PS.js";import{C as k}from"./CFormInput-DI9PoxJV.js";import{c as O}from"./cil-lock-locked-DmxpJbVL.js";import{C as P,a as _}from"./CFormControlWrapper-BEyPui5m.js";import{u as re}from"./useForkedRef-BhHB2M03.js";var y=f.forwardRef(function(a,l){var h=a.className,r=a.button,p=a.feedback,s=a.feedbackInvalid,E=a.feedbackValid,o=a.floatingLabel,b=a.tooltipFeedback,c=a.hitArea,i=a.id,N=a.indeterminate,D=a.inline,F=a.invalid,v=a.label,U=a.reverse,w=a.type,z=w===void 0?"checkbox":w,R=a.valid,L=K(a,["className","button","feedback","feedbackInvalid","feedbackValid","floatingLabel","tooltipFeedback","hitArea","id","indeterminate","inline","invalid","label","reverse","type","valid"]),C=f.useRef(null),B=re(l,C);f.useEffect(function(){C.current&&N&&(C.current.indeterminate=N)},[N,C.current]);var x=function(){return t.createElement("input",j({type:z,className:m(r?"btn-check":"form-check-input",{"is-invalid":F,"is-valid":R,"me-2":c}),id:i},L,{ref:B}))},I=function(){return t.createElement(_,{describedby:L["aria-describedby"],feedback:p,feedbackInvalid:s,feedbackValid:E,floatingLabel:o,invalid:F,tooltipFeedback:b,valid:R})},A=function(){var S;return t.createElement(P,j({customClassName:m(r?m("btn",r.variant?"btn-".concat(r.variant,"-").concat(r.color):"btn-".concat(r.color),(S={},S["btn-".concat(r.size)]=r.size,S),"".concat(r.shape)):"form-check-label")},i&&{htmlFor:i}),v)},G=function(){return r?t.createElement(t.Fragment,null,t.createElement(x,null),v&&t.createElement(A,null),t.createElement(I,null)):v?c?t.createElement(t.Fragment,null,t.createElement(x,null),t.createElement(P,j({customClassName:m("form-check-label stretched-link",h)},i&&{htmlFor:i}),v),t.createElement(I,null)):t.createElement("div",{className:m("form-check",{"form-check-inline":D,"form-check-reverse":U,"is-invalid":F,"is-valid":R},h)},t.createElement(x,null),t.createElement(A,null),t.createElement(I,null)):t.createElement(x,null)};return t.createElement(G,null)});y.propTypes=j({button:n.object,className:n.string,hitArea:n.oneOf(["full"]),id:n.string,indeterminate:n.bool,inline:n.bool,label:n.oneOfType([n.string,n.node]),reverse:n.bool,type:n.oneOf(["checkbox","radio"])},_.propTypes);y.displayName="CFormCheck";const pe=()=>{localStorage.removeItem(H),localStorage.removeItem(Y),localStorage.removeItem(q),localStorage.removeItem(J),localStorage.removeItem(M);const a=Q(),[l,h]=f.useState({first_name:"",last_name:"",email:"",password:"",user_type:""}),[r,p]=f.useState(!1),s=o=>{h({...l,[o.target.name]:o.target.value})},E=async o=>{var b,c;o.preventDefault(),p(!0);try{const i=await W.post("/api/auth/register/",l);alert("Registration successful"),a("/login")}catch(i){alert(((c=(b=i.response)==null?void 0:b.data)==null?void 0:c.detail)||"Registration failed")}finally{p(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(X,{children:e.jsx(Z,{className:"justify-content-center",children:e.jsx($,{md:9,lg:7,xl:6,children:e.jsx(ee,{className:"mx-4",children:e.jsxs(ae,{className:"p-4",children:[e.jsxs(te,{onSubmit:E,children:[e.jsx("h1",{children:"Register"}),e.jsx("p",{className:"text-body-secondary",children:"Create your account"}),e.jsxs(d,{className:"mb-3",children:[e.jsx(u,{children:e.jsx(g,{icon:V})}),e.jsx(k,{placeholder:"First Name",autoComplete:"first-name",value:l.first_name,name:"first_name",onChange:s})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(u,{children:e.jsx(g,{icon:V})}),e.jsx(k,{placeholder:"Last Name",autoComplete:"last-name",value:l.last_name,name:"last_name",onChange:s})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(u,{children:"@"}),e.jsx(k,{placeholder:"Email",autoComplete:"email",value:l.email,name:"email",onChange:s})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(u,{children:e.jsx(g,{icon:O})}),e.jsx(k,{type:"password",placeholder:"Password",autoComplete:"new-password",value:l.password,name:"password",onChange:s})]}),e.jsxs(d,{className:"mb-4",children:[e.jsx(u,{className:"me-2",children:e.jsx(g,{icon:O})}),e.jsx(y,{inline:!0,id:"inlineCheckbox1",name:"user_type",value:"teacher",label:"Teacher",onChange:s,checked:l.user_type==="teacher"}),e.jsx(y,{inline:!0,id:"inlineCheckbox2",name:"user_type",value:"student",label:"Student",onChange:s,checked:l.user_type==="student"})]}),e.jsx("div",{className:"d-grid",children:e.jsx(T,{color:"success",type:"submit",disabled:r,children:r?"Registering...":"Create Account"})})]}),e.jsxs("div",{className:"mt-2",children:["Already have an account? ",e.jsx(T,{color:"link",onClick:()=>a("/login"),children:"Login here"})]})]})})})})})})};export{pe as default};
