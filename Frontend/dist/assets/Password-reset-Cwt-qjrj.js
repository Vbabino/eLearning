import{k as u,a as m,j as e,L as C,A as j,m as f,I as g,n as y,U as S,l as v}from"./index-BraKEzPG.js";import{C as I}from"./index.esm-CyJlCjTa.js";import{b as E,c,d as s,a as d}from"./CRow-D-mEvV_I.js";import{C as N}from"./CCardGroup-Sqb-8jXq.js";import{C as T,a as b}from"./CCardBody-g5mY4aaI.js";import{C as O}from"./CForm-BLsk1Ow9.js";import{C as P,a as R}from"./CInputGroupText-Dcp3u1-q.js";import{c as w}from"./cil-user-Ddrdy7PS.js";import{C as D}from"./CFormInput-DI9PoxJV.js";import"./CFormControlWrapper-BEyPui5m.js";const V=()=>{u();const[r,p]=m.useState({email:""}),[t,o]=m.useState(!1),x=a=>{p({...r,[a.target.name]:a.target.value})},h=async a=>{var l,i;a.preventDefault(),o(!0);try{localStorage.removeItem(j),localStorage.removeItem(f),localStorage.removeItem(g),localStorage.removeItem(y),localStorage.removeItem(S);const n=await v.post("/api/auth/request-password-reset/",r);alert("OTP code sent to your email")}catch(n){alert(((i=(l=n.response)==null?void 0:l.data)==null?void 0:i.detail)||"OTP request failed")}finally{o(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(E,{children:e.jsx(c,{className:"justify-content-center",children:e.jsx(s,{md:8,children:e.jsx(N,{children:e.jsx(T,{className:"p-4",children:e.jsx(b,{children:e.jsxs(O,{onSubmit:h,children:[e.jsx("h1",{children:"Get a One Time Password code"}),e.jsx("p",{className:"text-body-secondary",children:"Enter your email to receive your OTP"}),e.jsxs(P,{className:"mb-3",children:[e.jsx(R,{children:e.jsx(I,{icon:w})}),e.jsx(D,{placeholder:"email",autoComplete:"email",name:"email",value:r.email,onChange:x})]}),e.jsxs(c,{children:[e.jsx(s,{xs:6,children:e.jsx(d,{color:"primary",className:"px-4",type:"submit",disabled:t,children:t?"Sending...":"Send OTP code"})}),e.jsx(s,{xs:6,className:"text-right",children:e.jsx(C,{to:"/verify-otp",children:e.jsx(d,{color:"link",className:"px-0",children:"Verify OTP"})})})]})]})})})})})})})})};export{V as default};
