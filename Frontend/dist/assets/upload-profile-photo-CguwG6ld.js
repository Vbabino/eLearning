import{a as p,k as h,j as o,l as g}from"./index-BraKEzPG.js";import{C}from"./CForm-BLsk1Ow9.js";import{C as y}from"./CFormInput-DI9PoxJV.js";import{a as x}from"./CRow-D-mEvV_I.js";import"./CFormControlWrapper-BEyPui5m.js";const U=()=>{const n=localStorage.getItem("id"),[t,d]=p.useState({photo:""}),[a,r]=p.useState(!1),m=h(),u=e=>{d({...t,photo:e.target.files[0]})},c=async e=>{var s,l;if(e.preventDefault(),r(!0),t.photo){const i=new FormData;i.append("photo",t.photo);try{await g.put(`/api/auth/user/upload-profile-photo/${n}/`,i,{headers:{"Content-Type":"multipart/form-data"}}),alert("Profile photo uploaded successfully"),localStorage.setItem("profileUpdated",Date.now()),m("/user/view")}catch(f){alert(((l=(s=f.response)==null?void 0:s.data)==null?void 0:l.detail)||"Upload failed")}finally{r(!1)}}else console.log("No file selected")};return o.jsxs(C,{onSubmit:c,children:[o.jsx(y,{type:"file",onChange:u,label:"Choose File",required:!0}),o.jsx(x,{className:"mt-2",type:"submit",color:"primary",disabled:a,children:a?"Uploading...":"Upload"})]})};export{U as default};
