import{a as d,l as o,j as e}from"./index-BraKEzPG.js";import{C as u}from"./index.esm-CyJlCjTa.js";import{C as x,a as f}from"./CCardBody-g5mY4aaI.js";import{C as v}from"./CCardTitle-CbD0xVOH.js";import{C as y,a as b,b as h,c,d as _,e as i}from"./CTable-DvbBEFif.js";import{a as m}from"./CRow-D-mEvV_I.js";var S=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M199.066,456l-7.379-7.514-3.94-3.9-86.2-86.2.053-.055L17.936,274.665l97.614-97.613,83.565,83.565L398.388,61.344,496,158.958,296.729,358.229,285.469,369.6ZM146.6,358.183l52.459,52.46.1-.1.054.054,52.311-52.311,11.259-11.368L450.746,158.958,398.388,106.6,199.115,305.871,115.55,222.306,63.191,274.665l83.464,83.463Z' class='ci-primary'/>"],g=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='348.071 141.302 260.308 229.065 172.545 141.302 149.917 163.929 237.681 251.692 149.917 339.456 172.545 362.083 260.308 274.32 348.071 362.083 370.699 339.456 282.935 251.692 370.699 163.929 348.071 141.302' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M425.706,86.294A240,240,0,0,0,86.294,425.706,240,240,0,0,0,425.706,86.294ZM256,464C141.309,464,48,370.691,48,256S141.309,48,256,48s208,93.309,208,208S370.691,464,256,464Z' class='ci-primary'/>"];const R=()=>{const[n,p]=d.useState({});d.useEffect(()=>{o.get("/api/courses/teacher/students/").then(r=>{const t=r.data.reduce((s,l)=>{const a=l.course_title;return s[a]||(s[a]=[]),s[a].push(l),s},{});p(t)}).catch(r=>{console.error("Error fetching students:",r)})},[]);const C=(r,t,s)=>{const l={id:r,course_id:t,is_active:!1,student:s};o.put(`/api/courses/${t}/remove_student/${r}/`,l).then(()=>{alert("Student removed successfully")}).catch(a=>{console.error("Error removing student:",a)})},j=(r,t,s)=>{const l={id:r,course_id:t,is_active:!1,student:s};o.put(`/api/courses/${t}/unblock_student/${r}/`,l).then(()=>{alert("Student unblocked successfully")}).catch(a=>{console.error("Error unblocking student:",a)})};return localStorage.getItem("user_type")!=="teacher"?e.jsx("div",{children:"Access Denied"}):Object.keys(n).length===0?e.jsx("div",{children:"No students enrolled in any course."}):e.jsx("div",{children:Object.entries(n).map(([r,t])=>e.jsx(x,{className:"mb-4",children:e.jsxs(f,{children:[e.jsx(v,{children:r}),e.jsxs(y,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(b,{children:e.jsxs(h,{children:[e.jsx(c,{children:"First Name"}),e.jsx(c,{children:"Last Name"}),e.jsx(c,{children:"Email"}),e.jsx(c,{children:"Actions"})]})}),e.jsx(_,{children:t.map(s=>e.jsxs(h,{children:[e.jsx(i,{children:s.student_details.first_name}),e.jsx(i,{children:s.student_details.last_name}),e.jsx(i,{children:s.student_details.email}),e.jsxs(i,{children:[e.jsxs(m,{color:"danger",className:"me-2 rounded-pill shadow-sm",onClick:()=>C(s.id,s.course,s.student),children:[e.jsx(u,{icon:g}),"Remove"]}),e.jsxs(m,{color:"success",className:"rounded-pill shadow-sm",onClick:()=>j(s.id,s.course,s.student),children:[e.jsx(u,{icon:S}),"Unblock"]})]})]},s.student))})]})]})},r))})};export{R as default};
