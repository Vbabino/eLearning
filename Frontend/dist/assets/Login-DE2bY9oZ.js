import{k as _,a as d,j as e,L as p,A as x,m as h,I as u,n as g,U as j,y as C,l as R}from"./index-BraKEzPG.js";import{C as S}from"./index.esm-CyJlCjTa.js";import{b as k,c as y,d as t,a as o}from"./CRow-D-mEvV_I.js";import{C as D}from"./CCardGroup-Sqb-8jXq.js";import{C as I,a as f}from"./CCardBody-g5mY4aaI.js";import{C as F}from"./CForm-BLsk1Ow9.js";import{C as v,a as N}from"./CInputGroupText-Dcp3u1-q.js";import{c as T}from"./cil-user-Ddrdy7PS.js";import{C as w}from"./CFormInput-DI9PoxJV.js";import{c as A}from"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-BEyPui5m.js";const z=()=>{const b=_(),[s,E]=d.useState({email:"",password:""}),[l,i]=d.useState(!1),n=r=>{E({...s,[r.target.name]:r.target.value})},L=async r=>{var c,m;r.preventDefault(),i(!0);try{localStorage.removeItem(x),localStorage.removeItem(h),localStorage.removeItem(u),localStorage.removeItem(g),localStorage.removeItem(j),localStorage.removeItem(C);const a=await R.post("/api/auth/login/",s);localStorage.setItem(x,a.data.access),localStorage.setItem(h,a.data.refresh),localStorage.setItem(C,a.data.user.is_active),localStorage.setItem(g,a.data.user.id),localStorage.setItem(u,a.data.user.is_approved),localStorage.setItem(j,a.data.user.user_type),b("/")}catch(a){alert(((m=(c=a.response)==null?void 0:c.data)==null?void 0:m.detail)||"Login failed")}finally{i(!1)}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(k,{children:e.jsx(y,{className:"justify-content-center",children:e.jsx(t,{md:8,children:e.jsxs(D,{children:[e.jsx(I,{className:"p-4",children:e.jsx(f,{children:e.jsxs(F,{onSubmit:L,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),e.jsxs(v,{className:"mb-3",children:[e.jsx(N,{children:e.jsx(S,{icon:T})}),e.jsx(w,{placeholder:"email",autoComplete:"email",name:"email",value:s.email,onChange:n})]}),e.jsxs(v,{className:"mb-4",children:[e.jsx(N,{children:e.jsx(S,{icon:A})}),e.jsx(w,{type:"password",placeholder:"Password",autoComplete:"current-password",name:"password",value:s.password,onChange:n})]}),e.jsxs(y,{children:[e.jsx(t,{xs:6,children:e.jsx(o,{color:"primary",className:"px-4",type:"submit",disabled:l,children:l?"Logging in...":"Login"})}),e.jsx(t,{xs:6,className:"text-right",children:e.jsx(p,{to:"/password-reset",children:e.jsx(o,{color:"link",className:"px-0",children:"Forgot password?"})})})]})]})})}),e.jsx(I,{className:"text-white bg-primary py-5",style:{width:"44%"},children:e.jsx(f,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Sign up"}),e.jsx("p",{children:"Join our eLearning platform to access interactive courses, expert instructors, and a supportive learning community. Start your educational journey today!"}),e.jsx(p,{to:"/register",children:e.jsx(o,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})})]})})})]})})})})})};export{z as default};
