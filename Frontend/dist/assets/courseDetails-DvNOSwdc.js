import{z as f,a,k as x,l as c,j as e}from"./index-BraKEzPG.js";import{C as g}from"./index.esm-CyJlCjTa.js";import{C as j,a as C}from"./CCardBody-g5mY4aaI.js";import{C as E}from"./CCardHeader-BDgx8Gn8.js";import{a as i}from"./CRow-D-mEvV_I.js";import{c as k}from"./cil-folder-open-BDg-r41_.js";const v=()=>{const{id:t}=f(),[s,d]=a.useState(null),[o,n]=a.useState(!1),[w,u]=a.useState(null),h=localStorage.getItem("user_type"),m=x();a.useEffect(()=>{c.get(`/api/courses/${t}/`).then(r=>{d(r.data),n(r.data.is_enrolled),u(r.data.feedback_id)}).catch(r=>{console.error("There was an error fetching the course data!",r)})},[t]);const p=()=>{if(o){alert("You are already enrolled in this course.");return}const r={student:parseInt(localStorage.getItem("id"),10),course:t,is_active:!0};console.log("Enrollment Data:",r),c.post(`/api/courses/${t}/enroll/`,r).then(l=>{alert("You have successfully enrolled in the course!"),n(!0)}).catch(l=>{console.error("There was an error enrolling in the course!",l)})};return s?e.jsxs(j,{children:[e.jsx(E,{children:e.jsx("h2",{children:s.title})}),e.jsxs(C,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Description:"})," ",s.description]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created At:"})," ",new Date(s.created_at).toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Updated At:"})," ",new Date(s.updated_at).toLocaleString()]}),e.jsx(i,{color:"primary",onClick:p,disabled:o||h!=="student",children:o?"Already Enrolled":"Enroll"}),e.jsxs(i,{color:"warning",className:" shadow-sm ms-2",onClick:()=>m(`/courses/${s.id}/feedback`),children:[e.jsx(g,{icon:k,className:"me-1"}),"View feedback"]})]})]}):e.jsx("div",{children:"Loading..."})};export{v as default};
