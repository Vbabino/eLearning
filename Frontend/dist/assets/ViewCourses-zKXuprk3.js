import{a as s,_ as y,R as c,b as v,c as C,P as r,k as de,j as l,l as G}from"./index-BraKEzPG.js";import{C as N}from"./index.esm-CyJlCjTa.js";import{C as J,a as Q}from"./CCardBody-g5mY4aaI.js";import{a as h,c as me,d as ue}from"./CRow-D-mEvV_I.js";import{C as fe}from"./CCardHeader-BDgx8Gn8.js";import{c as pe}from"./cil-folder-open-BDg-r41_.js";import{T as he,a as W,b as ve,c as ye}from"./DefaultLayout-BTmS3a1y.js";import{u as Ce}from"./useForkedRef-BhHB2M03.js";import"./cil-user-Ddrdy7PS.js";var k=s.forwardRef(function(e,i){var a=e.children,n=e.className,t=y(e,["children","className"]);return c.createElement("div",v({className:C("modal-content",n)},t,{ref:i}),a)});k.propTypes={children:r.node,className:r.string};k.displayName="CModalContent";var M=s.forwardRef(function(e,i){var a,n=e.children,t=e.alignment,m=e.className,d=e.fullscreen,f=e.scrollable,b=e.size,o=y(e,["children","alignment","className","fullscreen","scrollable","size"]);return c.createElement("div",v({className:C("modal-dialog",(a={"modal-dialog-centered":t==="center"},a[typeof d=="boolean"?"modal-fullscreen":"modal-fullscreen-".concat(d,"-down")]=d,a["modal-dialog-scrollable"]=f,a["modal-".concat(b)]=b,a),m)},o,{ref:i}),n)});M.propTypes={alignment:r.oneOf(["top","center"]),children:r.node,className:r.string,fullscreen:r.oneOfType([r.bool,r.oneOf(["sm","md","lg","xl","xxl"])]),scrollable:r.bool,size:r.oneOf(["sm","lg","xl"])};M.displayName="CModalDialog";var X=s.createContext({}),T=s.forwardRef(function(e,i){var a=e.children,n=e.alignment,t=e.backdrop,m=t===void 0?!0:t,d=e.className,f=e.container,b=e.duration,o=b===void 0?150:b,x=e.focus,Y=x===void 0?!0:x,_=e.fullscreen,S=e.keyboard,ee=S===void 0?!0:S,re=e.onClose,D=e.onClosePrevented,le=e.onShow,H=e.portal,P=H===void 0?!0:H,se=e.scrollable,oe=e.size,B=e.transition,j=B===void 0?!0:B,z=e.unmountOnClose,ae=z===void 0?!0:z,w=e.visible,ne=y(e,["children","alignment","backdrop","className","container","duration","focus","fullscreen","keyboard","onClose","onClosePrevented","onShow","portal","scrollable","size","transition","unmountOnClose","visible"]),Z=s.useRef(null),g=s.useRef(null),te=s.useRef(null),ce=Ce(i,g),A=s.useState(w),p=A[0],E=A[1],F=s.useState(!1),$=F[0],I=F[1],ie={visible:p,setVisible:E};s.useEffect(function(){E(w)},[w]),s.useEffect(function(){var u;return p?(Z.current=document.activeElement,document.addEventListener("mouseup",K),document.addEventListener("keydown",q)):(u=Z.current)===null||u===void 0||u.focus(),function(){document.removeEventListener("mouseup",K),document.removeEventListener("keydown",q)}},[p]);var U=function(){if(m==="static")return I(!0);E(!1)};s.useLayoutEffect(function(){D&&D(),setTimeout(function(){return I(!1)},o)},[$]),s.useLayoutEffect(function(){return p?(document.body.classList.add("modal-open"),m&&(document.body.style.overflow="hidden",document.body.style.paddingRight="0px"),setTimeout(function(){var u;Y&&((u=g.current)===null||u===void 0||u.focus())},j?o:0)):(document.body.classList.remove("modal-open"),m&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))),function(){document.body.classList.remove("modal-open"),m&&(document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right"))}},[p]);var K=function(u){g.current&&g.current==u.target&&U()},q=function(u){u.key==="Escape"&&ee&&U()};return c.createElement(c.Fragment,null,c.createElement(he,{in:p,mountOnEnter:!0,nodeRef:g,onEnter:le,onExit:re,unmountOnExit:ae,timeout:j?o:0},function(u){return c.createElement(W,{container:f,portal:P},c.createElement(X.Provider,{value:ie},c.createElement("div",v({className:C("modal",{"modal-static":$,fade:j,show:u==="entered"},d),tabIndex:-1},p?{"aria-modal":!0,role:"dialog"}:{"aria-hidden":"true"},{style:v({},u!=="exited"&&{display:"block"})},ne,{ref:ce}),c.createElement(M,{alignment:n,fullscreen:_,scrollable:se,size:oe},c.createElement(k,{ref:te},a)))))}),m&&c.createElement(W,{container:f,portal:P},c.createElement(ve,{visible:p})))});T.propTypes={alignment:r.oneOf(["top","center"]),backdrop:r.oneOfType([r.bool,r.oneOf(["static"])]),children:r.node,className:r.string,container:r.any,duration:r.number,focus:r.bool,fullscreen:r.oneOfType([r.bool,r.oneOf(["sm","md","lg","xl","xxl"])]),keyboard:r.bool,onClose:r.func,onClosePrevented:r.func,onShow:r.func,portal:r.bool,scrollable:r.bool,size:r.oneOf(["sm","lg","xl"]),transition:r.bool,unmountOnClose:r.bool,visible:r.bool};T.displayName="CModal";var R=s.forwardRef(function(e,i){var a=e.children,n=e.className,t=y(e,["children","className"]);return c.createElement("div",v({className:C("modal-body",n)},t,{ref:i}),a)});R.propTypes={children:r.node,className:r.string};R.displayName="CModalBody";var O=s.forwardRef(function(e,i){var a=e.children,n=e.className,t=y(e,["children","className"]);return c.createElement("div",v({className:C("modal-footer",n)},t,{ref:i}),a)});O.propTypes={children:r.node,className:r.string};O.displayName="CModalFooter";var L=s.forwardRef(function(e,i){var a=e.children,n=e.className,t=e.closeButton,m=t===void 0?!0:t,d=y(e,["children","className","closeButton"]),f=s.useContext(X).setVisible;return c.createElement("div",v({className:C("modal-header",n)},d,{ref:i}),a,m&&c.createElement(ye,{onClick:function(){return f(!1)}}))});L.propTypes={children:r.node,className:r.string,closeButton:r.bool};L.displayName="CModalHeader";var V=s.forwardRef(function(e,i){var a=e.children,n=e.as,t=n===void 0?"h5":n,m=e.className,d=y(e,["children","as","className"]);return c.createElement(t,v({className:C("modal-title",m)},d,{ref:i}),a)});V.propTypes={as:r.elementType,children:r.node,className:r.string};V.displayName="CModalTitle";var be=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='346.231 284.746 256.039 194.554 165.847 284.746 188.474 307.373 240.039 255.808 240.039 496 272.039 496 272.039 255.808 323.604 307.373 346.231 284.746' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M400,161.453V160c0-79.4-64.6-144-144-144S112,80.6,112,160v2.491A122.285,122.285,0,0,0,49.206,195.2,109.4,109.4,0,0,0,16,273.619c0,31.119,12.788,60.762,36.01,83.469C74.7,379.275,105.338,392,136.07,392H200V360H136.07C89.154,360,48,319.635,48,273.619c0-42.268,35.64-77.916,81.137-81.155L144,191.405V160a112,112,0,0,1,224,0v32.04l15.8.2c46.472.588,80.2,34.813,80.2,81.379C464,322.057,428.346,360,382.83,360H312v32h70.83a109.749,109.749,0,0,0,81.14-35.454C484.625,334.339,496,304.889,496,273.619,496,215.182,455.716,169.392,400,161.453Z' class='ci-primary'/>"],xe=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M29.663,482.25l.087.087a24.847,24.847,0,0,0,17.612,7.342,25.178,25.178,0,0,0,8.1-1.345l142.006-48.172,272.5-272.5A88.832,88.832,0,0,0,344.334,42.039l-272.5,272.5L23.666,456.541A24.844,24.844,0,0,0,29.663,482.25Zm337.3-417.584a56.832,56.832,0,0,1,80.371,80.373L411.5,180.873,331.127,100.5ZM99.744,331.884,308.5,123.127,388.873,203.5,180.116,412.256,58.482,453.518Z' class='ci-primary'/>"],ge=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"];const Le=()=>{const[e,i]=s.useState([]),[a,n]=s.useState(!1),[t,m]=s.useState(null),d=de();s.useEffect(()=>{(async()=>{try{const x=await G.get("/api/courses/list/");i(x.data)}catch(x){console.error("Error fetching courses:",x)}})()},[]);const f=async()=>{if(t)try{await G.delete(`/api/courses/${t}/delete/`),i(e.filter(o=>o.id!==t)),n(!1),m(null)}catch(o){console.error("Error deleting course:",o)}};return localStorage.getItem("user_type")!=="teacher"?l.jsx("div",{children:"Access Denied"}):e.message?l.jsx("div",{className:"text-right",children:l.jsx(J,{children:l.jsxs(Q,{children:[l.jsx("h4",{children:e.message}),l.jsx(h,{color:"primary",onClick:()=>d("/teachers/manage-courses/create"),children:"Create Course"})]})})}):l.jsxs("div",{children:[l.jsx("div",{className:"text-right mb-4",children:l.jsx(h,{color:"primary",onClick:()=>d("/teachers/manage-courses/create"),children:"Create Course"})}),l.jsx(me,{className:"mb-4",children:e.map(o=>l.jsx(ue,{sm:"6",lg:"4",className:"mb-4",children:l.jsxs(J,{children:[l.jsx(fe,{children:o.title}),l.jsxs(Q,{children:[l.jsx("p",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:o.description}),l.jsxs("small",{children:["Created at: ",new Date(o.created_at).toLocaleDateString()]}),l.jsx("br",{}),l.jsxs("small",{children:["Updated at: ",new Date(o.updated_at).toLocaleDateString()]}),l.jsx("br",{}),l.jsxs("div",{className:"d-flex flex-column mt-2",children:[l.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[l.jsxs(h,{color:"primary",className:"me-2 rounded-pill shadow-sm",onClick:()=>d(`/teachers/manage-courses/${o.id}`),children:[l.jsx(N,{icon:xe,className:"me-1"}),"Edit"]}),l.jsxs(h,{color:"danger",className:"rounded-pill shadow-sm",onClick:()=>{m(o.id),n(!0)},children:[l.jsx(N,{icon:ge,className:"me-1"}),"Delete"]})]}),l.jsxs("div",{className:"d-flex justify-content-between",children:[l.jsxs(h,{color:"info",className:"me-2 rounded-pill shadow-sm",onClick:()=>d(`/teachers/manage-courses/${o.id}/upload`),children:[l.jsx(N,{icon:be,className:"me-1"}),"Upload Materials"]}),l.jsxs(h,{color:"success",className:"rounded-pill shadow-sm",onClick:()=>d(`/teachers/manage-courses/${o.id}/materials`),children:[l.jsx(N,{icon:pe,className:"me-1"}),"View Materials"]})]})]}),l.jsxs(T,{visible:a,onClose:()=>n(!1),"aria-labelledby":"LiveDemoExampleLabel",children:[l.jsx(L,{children:l.jsx(V,{id:"LiveDemoExampleLabel",children:"Delete Course"})}),l.jsx(R,{children:"Are you sure you want to delete this course?"}),l.jsxs(O,{children:[l.jsx(h,{color:"secondary",onClick:()=>n(!1),children:"Close"}),l.jsx(h,{color:"danger",onClick:f,children:"Confirm Delete"})]})]})]})]})},o.id))})]})};export{Le as default};
